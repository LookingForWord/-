<div class="container">
    <div>
        <table-component>
            <div class="table-component-search line">
                <button class="addDatabase btn line primary mr6"  authority="governance.norm.add" (click)="addNorm()">
                    <i class="icon iconfont mr5 icon-ico_add"></i><span>新建指标</span>
                </button>
                <div class="input-icon" position="left">
                    <input type="text"  class="input" [(ngModel)]="keyword" inputDebounce (debounceClick)="searchInstanceChange($event)"  placeholder="支持指标名和数据源名称搜索">
                    <i class="icon iconfont icon-ico_search_textfield"></i>
                </div>
                <button class="back line btn ml5" (click)="getNormList(1);">
                    搜索
                </button>
            </div>
            <div class="table-component-title">
                <span class="title">
                    <i class="icon iconfont icon-zhibiaoguanli mr8"></i>指标管理列表
                </span>
                <span class="record">共{{totalcount}}条记录</span>
            </div>
            <thead class="table-component-thead">
            <tr>
                <th width="13%">名称</th>
                <th width="13%">指标类型</th>
                <th width="13%">创建时间</th>
                <th width="12%">创建人</th>
                <th width="13%">数据源</th>
                <th width="13%">数据源类型</th>
                <th width="13%">结果类型</th>
                <th width="10%">操作</th>
            </tr>
            </thead>
            <tbody class="table-component-tbody">
            <tr *ngFor="let item of normList; let i=index">
                <td>{{item.checkName}}</td>
                <td>{{item.checkType}}</td>
                <td>{{item.createTime | date: 'YYYY-MM-DD HH:mm:ss'}}</td>
                <td>{{item.creatorId}}</td>
                <td>{{item.dsName}}</td>
                <td>{{item.dsType}}</td>
                <td>{{item.resultType === 'single' ? '单行' : '多行'}}</td>
                <td>
                    <button class="btn icon only" tooltip="查看" position="top"  (click)="detailClick(item)">
                        <i class="icon iconfont icon-ico_view"></i>
                    </button>
                    <button class="btn icon only"  tooltip="编辑" position="top" authority="governance.norm.edit" (click)="editClick(item)">
                        <i class="icon iconfont icon-ico_edit"></i>
                    </button>
                    <button class="btn icon only" tooltip="删除" position="top" authority="governance.norm.delete" (click)="deleteClick(item.id)">
                        <i class="icon iconfont icon-ico_delete"></i>
                    </button>
                </td>
            </tr>
            </tbody>
            <tfoot class="table-component-tfoot">
            <tr *ngIf="noData">
                <td colspan="8">暂无数据...</td>
            </tr>
            </tfoot>
            <div class="table-component-page">
                <multi-pagination-component [pagenow]="pageNum" [pagesize]="pageSize" [totalcount]="totalcount" (onPageChange)="doPageChange($event)"></multi-pagination-component>
            </div>
        </table-component>
    </div>
</div>

